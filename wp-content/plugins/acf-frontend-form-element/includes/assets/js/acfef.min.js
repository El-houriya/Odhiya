jQuery(document).on('elementor/popup/show',(event, id, instance)=>{acf.do_action('append',jQuery('#elementor-popup-modal-' + id))});var modal;var draft_select;function openModal(modal_number){modal=document.getElementById("modal_"+modal_number);modal.classList.add('show');modal.classList.remove('hide');acf.do_action('append', jQuery("#modal_"+modal_number))};function closeModal(modal_number,clear){modal=jQuery("#modal_"+modal_number);modal.removeClass('show');modal.addClass('hide');if(typeof(clear)!=='undefined'){modal.find('.content-container').html('')}}window.onclick=function(event){if(event.target==modal){modal.classList.remove('show')}};draft_select=document.getElementById('acfef-form-drafts');if(draft_select!=null){ draft_select.onchange=function(){window.location=this.value}}function changeTab(e){jQuery(".multi-step.active:not(.step-hidden)").removeClass("active").addClass("step-hidden"),jQuery(".multi-step.step-"+e).removeClass("step-hidden").addClass("active"),jQuery(".form-tab.active").removeClass("active"),jQuery(".form-tab.step-"+e).addClass("active")}jQuery(".acfef-prev-button").click(function(e){e.preventDefault();var t=jQuery(".acfef-prev-button").siblings("input[name=prev_step_link]").val();document.location.href=t});jQuery(".acfef-reply-link").on("click",function(t){var a=jQuery(this).attr("data-replyform"),e=jQuery(this).attr("data-commentid"),r=jQuery(this).attr("data-postid");jQuery("#"+a).find("input[name=acfef_parent_comment]").val(e),jQuery("#"+a).find("input[name=acfef_parent_post]").val(r)});jQuery("body").on('click','span.close-msg',function(a){jQuery(this).parents('.acfef-message').remove()});jQuery("body").on('input',function(a){jQuery('.acfef-message').remove()});acf.add_action("ready_field/type=relationship",function(a){a.find(".acf-button.button-primary").on("click",function(){relField=a;container=showModal(a.data("key"),"500px");getForm(a,"add_post")});jQuery("body").find(a).on("click","a.edit-post",function(b){b.preventDefault();b.stopPropagation();relField=a;container=showModal(a.data("key"),"500px");b=jQuery(this).parent("span.acf-rel-item").data("id");getForm(a,b)})});
jQuery(".post-slug-field input").on("input",function(){var a=this.selectionStart,b=/[`~!@#$%^&*()|+=?;:..\u2019\u201c'"<>,\u20ac\u00a3\u00a5\u2022\u060c\u066b\u061f\u00bb\u00ab\s\{\}\[\]\\\/]+/gi,c=jQuery(this).val();b.test(c)&&(jQuery(this).val(c.replace(b,"").toLowerCase()),a--);this.setSelectionRange(a,a)});
jQuery("body").on("click","button.edit-password",function(){jQuery(this).addClass("acfef-hidden").siblings(".pass-strength-result").removeClass("acfef-hidden").parents(".acf-field-password").removeClass("edit_password").addClass("editing_password").next(".acf-field-password").removeClass("edit_password");jQuery(this).after('<input type="hidden" name="edit_user_password" value="1"/>')});
jQuery("body").on("click","button.cancel-edit",function(){jQuery(this).siblings("button.edit-password").removeClass("acfef-hidden").siblings(".pass-strength-result").addClass("acfef-hidden").parents(".acf-field-password").addClass("edit_password").removeClass("editing_password").next(".acf-field-password").addClass("edit_password");jQuery(this).siblings("input[name=edit_user_password]").remove()});
function showModal(a,b){var c=jQuery("#modal_"+a);c.length?c.removeClass("hide").addClass("show"):(c=jQuery('<div id="modal_'+a+'" class="modal edit-modal show"><div class="modal-content" style="width:'+b+'"><div class="modal-inner"><span onClick="closeModal(\''+a+'\',\'clear\')" class="acf-icon -cancel close"></span><div class="content-container"><div class="loading"><span class="acf-loading"></span></div></div></div></div></div>'),jQuery("body").append(c));return c}
function getForm(a,b){var c={action:"acfef/fields/relationship/add_form",field_key:a.data("key"),parent_form:a.parents("form").attr("id"),form_action:b};jQuery.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(c),type:"post",dataType:"html",success:showForm})}function showForm(a){container.find(".content-container").html(a);acf.do_action("append",container)}jQuery("body").on("click",".acfef-draft-button",function(a){window.acf.validation.active=!1;jQuery(this).parents("form.acfef-form").find("input[name=_acf_status]").val("draft")});
jQuery("body").on("submit","form.acfef-form",function(a){a.preventDefault();$form=jQuery(this);$form.find(".acf-spinner").css("display","block");$form.find("input[type=submit]").each(function(b,c){jQuery(c).addClass("disabled")});args={form:$form,reset:!1,success:function(b){acfef_submit_form(b)}};acf.validateForm(args)});
function acfef_submit_form(a){var b=jQuery('input[type="file"]:not([disabled])',a);b.each(function(e,f){0<f.files.length||jQuery(f).prop("disabled",!0)});var c=new FormData(a[0]);c.append("action","acfef/form_submit");b.prop("disabled",!1);acf.lockForm(a);jQuery.ajax({url:acf.get("ajaxurl"),type:"post",data:c,cache:!1,processData:!1,contentType:!1,success:function(e){if(e.success)if(e.data.redirect)window.location=e.data.redirect;else if(acf.unlockForm(a),successMessage='<div class="acfef-message"><div class="acf-notice -success acf-success-message"><p class="success-msg">'+
e.data.update_message+'</p><span class="acfef-dismiss close-msg acf-notice-dismiss acf-icon -cancel small"></span></div></div>',e.data.append){var f=e.data.append;"edit"==f.action?(relField.find("div.values").find("span[data-id="+f.id+"]").html(f.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a>'),relField.find("div.choices").find("span[data-id="+f.id+"]").html(f.text)):relField.find("div.values ul").append('<li><input type="hidden" name="acf['+relField.data("key")+'][]" value="'+
f.id+'" /><span data-id="'+f.id+'" class="acf-rel-item">'+f.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a></span></li>');a.replaceWith(successMessage);jQuery("body").find("#modal_"+e.data.field_key).delay(400).remove()}else a.find(".acf-spinner").css("display","none"),a.find("input[type=submit]").removeClass("disabled"),a.before(successMessage);var widget=a.data('widget');if(e.data.clear_form){a.replaceWith(e.data.clear_form);acf.do_action('append',jQuery('.elementor-element-' + widget))}}})}
jQuery(document).ready(function(){var a=jQuery("div[data-default]");jQuery.each(a,function(b,c){var e=jQuery(c),f=e.data("default"),p=e.data("dynamic_value"),q=e.find("input[type=text]");if(0<f.length){var r=function(h){var g=[h,"value"];~h.indexOf(":")&&(g=h.split(":"));return g},l=function(h,g){var d=e.siblings("div[data-name="+h+"]"),k=d.find("input");"radio"==d.data("type")&&(k=1==g?d.find("input"):d.find("input:selected"));"select"==d.data("type")&&(k=d.find("select"));return k},t=function(h,
g,d){var k="["+g[0]+"]";""!=d.val()&&(d=d.val(),"text"==g[1]&&(g=e.siblings("div[data-name="+g[0]+"]"),"radio"==g.data("type")&&(sourceInput=g.find(".selected").text()),"select"==g.data("type")&&(sourceInput=g.find(":selected").text()),d=sourceInput),h=h.replace(k,d));return h},m=p;jQuery.each(f,function(h,g){var d=r(g),k=l(d[0],!1);m=t(m,d,k);k=l(d[0],!0);k.on("input",function(){var n=p;jQuery.each(f,function(x,v){var u=r(v),w=l(u[0],!1);n=t(n,u,w)});q.val(n)})});q.val(m)}})});

